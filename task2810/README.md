# Агрегатор java вакансий

Программа содержит список сайтов, на которых можно искать вакансии (hh.ru, Habr Карьера).

### Мои достижения:
1. Разобралась с паттерном Strategy,
2. Разобралась с самым популярным паттерном MVC (его очень часто спрашивают на собеседовании),
3. Научилась парсить HTML,
4. Получила опыт работы с библиотекой Jsoup,
5. Научилась подключать внешние либы в IDEA.

### Порядок действий при разработке:
- Создай класс Aggregator с методом main.
- Создай пакет model, и в нем создай класс Provider.
- В пакете model создай интерфейс Strategy.
- В класс Provider добавь приватное поле Strategy strategy. Добавь конструктор с этим полем и сеттер.
- Создай класс Controller.
- К классу Controller добавь конструктор, который принимает столько провайдеров, сколько в него передадут для обработки.
- В конструкторе сохрани все провайдеры в поле providers. Если ни одного провайдера передано не было - брось IllegalArgumentException
- В классе Controller создай метод toString со стандартной реализацией.
- В методе main создай провайдер и контроллер с этим провайдером.
- В методе main выведи в консоль созданный экземпляр контроллера.
- В корне задачи создай пакет vo, в нем создай класс Vacancy.
- В классе Provider создай пустой публичный метод getJavaVacancies(String searchString), который будет возвращать список вакансий.
- В классе Vacancy создай приватные строковые поля: title, salary, city, companyName, siteName, url.
- К полям в классе Vacancy создай геттеры и сеттеры.
- В пакете model создай класс HHStrategy, который реализует интерфейс Strategy.
- В классе HHStrategy создай приватную строковую константу URL_FORMAT.
- Результат команды String.format(URL_FORMAT, String, int) должен генерироваться согласно заданию.
- Для выполнения дальнейших указаний, подключи библиотеку jsoup версии 1.9.2 (проверка этого требования не выполняется).
- В интерфейсе Strategy добавь метод getVacancies(String searchString).
- Обнови класс HHStrategy, что бы в нем не было ошибок.
- В классе Provider реализуй логику метода getJavaVacancies.
- В методе main вместо вывода на экран добавь вызов controller.scan(). Реализуй этот метод согласно заданию.
- Вызов main не должен кидать NullPointerException. Поставь заглушки в необходимых местах.
- В методе getVacancies класса HHStrategy реализуй коннекшен к урлу сайта поиска работы методом GET.
- Скопируй html код полученной странички себе в файл для дальнейшего анализа (проверка этого требования не выполняется).
- В классе Vacancy сгенерируй с помощью IDE методы equals() и hashCode().
- В методе getVacancies класса HHStrategy после создания коннекшена добавь заголовок userAgent.
- В методе getVacancies класса HHStrategy после создания коннекшена добавь заголовок referrer.
- В классе HHStrategy создай protected метод getDocument(String searchString, int page). Перенеси туда логику по получению объекта html-страницы Document.
- Метод getVacancies класса HHStrategy должен получать содержимое страниц с помощью метода getDocument. Начни с 0 страницы. 
- Из объекта Document получи список html-элементов с атрибутом по имени "data-qa" и значением "vacancy-serp__vacancy". Для каждого элемента создай объект вакансии и добавь его в возвращающий методом список. 
- Нужно последовательно обработать все страницы результатов поиска. Как только страницы с вакансиями закончатся, прерви цикл и верни список найденных вакансий. 
- У каждой вакансии должно быть заполнено поле title полученными из html-элемента данными о названии вакансии. 
- У каждой вакансии должно быть заполнено поле url полученной из html-элемента ссылкой на вакансию. 
- У каждой вакансии должно быть заполнено поле city полученными из html-элемента данными о городе. 
- У каждой вакансии должно быть заполнено поле companyName полученными из html-элемента данными о компании. 
- У каждой вакансии должно быть заполнено поле siteName значением сайта, на котором вакансия была найдена. 
- Поле salary у вакансии должно быть заполнено, если в html-элементе присутствовал тег с зарплатой. Иначе поле должно быть инициализировано пустой строкой. 
- Если ты менял значение поля URL_FORMAT, не забудь вернуть его обратно. 
- В корне задачи создай новый пакет view, в нем создай интерфейс View. 
- Интерфейс View должен содержать два метода согласно заданию. 
- В пакете view создай новый класс HtmlView, который реализует View. 
- В классе HtmlView создай приватное поле controller типа Controller и для его инициализации реализуй один из методов интерфейса.
- Создай класс Model в пакете model. 
- В классе Model добавь два приватных поля: вью и массив провайдеров. 
- Создай конструктор с двумя параметрами: вью и массив провайдеров (аргумент переменной длинны - varargs). На неправильные данные кинь IllegalArgumentException. 
- В класс Model добавь метод public void selectCity(String city). 
- Реализуй логику метода selectCity(String). Он должен получать вакансии с каждого провайдера и передавать их все в метод update у вью. 
- В классе Controller добавь новое приватное поле Model model. 
- Удали из Controller метод scan, метод toString, конструктор и поле providers. 
- Добавь в Controller новый конструктор с аргументом Model. На некорректные данные брось IllegalArgumentException. 
- Создай в Controller публичный метод void onCitySelect(String cityName), в котором вызови нужный метод модели. 
- Удали старый код из метода main
- В классе HtmlView создай и реализуй публичный метод void userCitySelectEmulationMethod() согласно заданию. 
- В классе HtmlView в метод update добавь вывод количества вакансий в консоль. 
- Реализуй метод main согласно заданию и проверь, работает ли приложение как положено.
- В классе HtmlView создай пустой приватный метод String getUpdatedFileContent(List<Vacancy>). 
- В классе HtmlView создай пустой приватный метод void updateFile(String). 
- С помощью созданных методов реализуй логику update согласно заданию. 
- В классе HtmlView создай приватное строковое final поле filePath и присвой ему относительный путь к vacancies.html.
- В классе HtmlView в методе updateFile открой поток для записи в файл. 
- Запиши в файл данные, которые метод updateFile получает аргументом. 
- Закрой поток записи в файл.
- В классе HtmlView добавь метод protected Document getDocument() в котором распарси файл vacancies.html используя Jsoup. 
- Реализуй метод getUpdatedFileContent(). Для начала, получи распарсеную страницу с помощью метода getDocument(). 
- Получи элемент, у которого есть класс template. Сделай копию этого объекта, удали из нее атрибут "style" и класс "template". 
- Удали из страницы все добавленные ранее вакансии с классом "vacancy". Элемент с классом "vacancy template" должен остаться. 
- Перед объектом template для каждой вакансии добавь на страницу отдельный html-элемент, используя копию template. Верни html-код всей страницы в качестве результата работы метода. 
- Для каждой вакансии должен быть корректно заполнен элемент-ссылка с названием вакансии(title) и http-ссылкой на нее(href). 
- Для каждой вакансии должен быть корректно заполнен элемент с классом "city". 
- Для каждой вакансии должен быть корректно заполнен элемент с классом "companyName". 
- Для каждой вакансии должен быть корректно заполнен элемент с классом "salary". 
- В случае возникновения исключения, выведи его стек-трейс и верни строку "Some exception occurred".
- В пакете model создай новый класс HabrCareerStrategy, который реализует интерфейс Strategy. 
- В классе HabrCareerStrategy добавь приватную статическую константу URL_FORMAT, по аналогии с HHStrategy. 
- В классе HabrCareerStrategy создай protected метод getDocument(String searchString, int page). Реализуй его по аналогии с HHStrategy. 
- Метод getVacancies класса HabrCareerStrategy должен получать содержимое страниц с помощью метода getDocument. Начни с 0 страницы. 
- Из объекта Document получи список html-элементов с вакансиями. Для каждого элемента создай объект вакансии и добавь его в возвращающий методом список. 
- Нужно последовательно обработать все страницы результатов поиска. Как только страницы с вакансиями закончатся, прерви цикл и верни список найденных вакансий. 
- У каждой вакансии должно быть заполнено поле title полученными из html-элемента данными о названии вакансии. 
- У каждой вакансии должно быть заполнено поле url полученной из html-элемента ссылкой на вакансию. 
- У каждой вакансии должно быть заполнено поле companyName полученными из html-элемента данными о компании. 
- У каждой вакансии должно быть заполнено поле siteName значением сайта, на котором вакансия была найдена. 
- Поле city у вакансии должно быть заполнено, если в html-элементе присутствовал тег с данными о городе. Иначе поле должно быть инициализировано пустой строкой. 
- Поле salary у вакансии должно быть заполнено, если в html-элементе присутствовал тег с зарплатой. Иначе поле должно быть инициализировано пустой строкой. 
- В методе main в модель добавь новый провайдер, инициализированный стратегией HabrCareerStrategy.


## Также можно сделать:
1. Добавить еще 100500 других сайтов для агрегирования вакансий.
   Нужно всего лишь создать стратегию, а потом добавить в модель провайдер с этой стратегией.
2. Отсортировать все вакансии, например, по дате создания (придется распарсить дату в полученном html).
3. Создать свою вью, например, на свинге. Подменить в main HtmlView на SwingView. Сделать, чтоб запрос приходил с swing-формы.
4. Собрать приложение в war-ник, развернуть Томкат, задеплоить приложение туда. Сделать, чтоб запрос приходил с браузера.
